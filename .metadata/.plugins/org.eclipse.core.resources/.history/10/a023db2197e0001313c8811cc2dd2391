package com.example.rotaturistica;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.SimpleAdapter;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Toast;

import com.example.controller.AtracaoController;
import com.example.entidade.Atracao;

public class AtracaoListActivity extends ListActivity implements OnItemClickListener{

	private List<Map<String, Object>> atracoes ;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);

		String[] from = {"icone", "atracao", "id", "idTipoAtracao"};
		int[] to = {R.id.tipoAtracao, R.id.atracao};

		SimpleAdapter adapter =	new SimpleAdapter(this, listarAtracoes(),R.layout.lista_atracao, from, to);
		setListAdapter(adapter);
		getListView().setOnItemClickListener(this);


	}


	private List<Map<String, Object>> listarAtracoes() {
		atracoes = new ArrayList<Map<String,Object>>();
		AtracaoController atracao = new AtracaoController();
		List<Atracao> listaDeAtracao = new ArrayList<Atracao>();


		listaDeAtracao = atracao.getTipoDeAtracao(this);

		
			for(int i = 0; i < listaDeAtracao.size(); i++){

				Map<String, Object> item = new HashMap<String, Object>();


				if(listaDeAtracao.get(i).getTipoAtracao().getId() == 2)
					item.put("icone", R.drawable.theater);
				else
					item.put("icone", R.drawable.riparianhabitat);


				item.put("atracao", listaDeAtracao.get(i).getTipoAtracao().getAtracao());
				item.put("idTipoAtracao", listaDeAtracao.get(i).getTipoAtracao().getId());
				item.put("id", listaDeAtracao.get(i).getTipoAtracao().getId());
				atracoes.add(item);

			}
			return atracoes;
	}


	@Override
	public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

		Map<String, Object> map = atracoes.get(position);
		long idAtracao = (Long) map.get("id");
		long idTipoAtracao =  (Long) map.get("idTipoAtracao");
		int icone = (Integer) map.get("icone");
		Intent i=new Intent(this, AtracaoSelecionadoActivity.class);
		i.putExtra("idAtracao",idAtracao);
		i.putExtra("idTipoAtracao",idTipoAtracao);
		i.putExtra("icone",icone);
		startActivity(i);


	}


}

